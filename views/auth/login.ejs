<%- include("../partials/header") %>
<section class="auth auth-login login-screen">
  <% if (mode === "choice") { %>
    <div class="auth-head auth-head-choice">
      <p class="kicker">Comecar reserva</p>
      <h1>Criar uma reserva</h1>
      <p class="muted">Escolha como deseja continuar.</p>
    </div>
    <div class="auth-choice-grid">
      <a class="auth-choice-card auth-choice-primary" href="/register">
        <span class="auth-choice-icon" aria-hidden="true"><i class="bi bi-person-plus"></i></span>
        <span class="auth-choice-title">Criar conta</span>
        <span class="auth-choice-desc">Cadastro rapido para a primeira reserva.</span>
      </a>
      <a class="auth-choice-card auth-choice-secondary" href="/login?mode=signin">
        <span class="auth-choice-icon" aria-hidden="true"><i class="bi bi-box-arrow-in-right"></i></span>
        <span class="auth-choice-title">Ja tenho conta</span>
        <span class="auth-choice-desc">Entrar com email e senha.</span>
      </a>
    </div>
  <% } else { %>
    <section class="login-page">
      <article class="auth auth-login login-main-card">
        <div class="login-accent-bar" aria-hidden="true"></div>
        <div class="auth-head">
          <p class="kicker login-kicker">Acesso seguro</p>
          <h1>Entrar no sistema</h1>
          <p class="muted">Use o seu email e senha para continuar.</p>
          <div class="login-trust-row">
            <span class="login-trust-pill"><i class="bi bi-shield-check" aria-hidden="true"></i> Sessao protegida</span>
            <span class="login-trust-pill"><i class="bi bi-lightning-charge" aria-hidden="true"></i> Acesso rapido</span>
          </div>
        </div>
        <form method="post" action="/login" class="form login-form">
          <label>Email</label>
          <div class="input-with-icon">
            <i class="bi bi-envelope icon" aria-hidden="true"></i>
            <input type="email" name="email" autocomplete="username" placeholder="seuemail@exemplo.com" required />
          </div>

          <label>Senha
            <div class="input-with-icon password-field">
              <i class="bi bi-lock icon" aria-hidden="true"></i>
              <input id="login-password" type="password" name="password" autocomplete="current-password" placeholder="Digite sua senha" required />
              <button id="toggle-password" type="button" class="password-toggle" aria-label="Mostrar senha">
                <i class="bi bi-eye" aria-hidden="true"></i>
              </button>
            </div>
          </label>
          <button class="btn auth-submit login-submit" type="submit"><i class="bi bi-box-arrow-in-right icon" aria-hidden="true"></i> Entrar com seguranca</button>
        </form>
        <div class="login-bottom-links">
          <p class="auth-alt">Ainda nao tem conta? <a href="/register">Criar conta</a></p>
          <a class="login-back-link" href="/login">Voltar a selecao</a>
        </div>
      </article>

      <aside class="card login-side-card">
        <p class="kicker login-kicker-muted">Protecao</p>
        <h3>Seu acesso com seguranca</h3>
        <ul class="login-benefits">
          <li><i class="bi bi-shield-lock icon" aria-hidden="true"></i> Sessao protegida para sua conta</li>
          <li><i class="bi bi-calendar-check icon" aria-hidden="true"></i> Acesso rapido as suas reservas</li>
          <li><i class="bi bi-credit-card icon" aria-hidden="true"></i> Pagamentos e historico em um so lugar</li>
        </ul>
        <div class="login-side-steps">
          <p><strong>1.</strong> Entre na sua conta</p>
          <p><strong>2.</strong> Escolha os servicos</p>
          <p><strong>3.</strong> Confirme e reserve</p>
        </div>
      </aside>
    </section>
  <% } %>
</section>
<script>
  (function () {
    var passwordInput = document.getElementById("login-password");
    var toggleBtn = document.getElementById("toggle-password");
    if (!passwordInput || !toggleBtn) return;
    toggleBtn.addEventListener("click", function () {
      var showing = passwordInput.type === "text";
      passwordInput.type = showing ? "password" : "text";
      toggleBtn.setAttribute("aria-label", showing ? "Mostrar senha" : "Ocultar senha");
      toggleBtn.innerHTML = showing
        ? '<i class="bi bi-eye" aria-hidden="true"></i>'
        : '<i class="bi bi-eye-slash" aria-hidden="true"></i>';
    });
  })();
</script>
<%- include("../partials/footer") %>
